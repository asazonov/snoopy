<!DOCTYPE html>
<html lang="en"><head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="">
        <link rel="icon" href="http://getbootstrap.com/favicon.ico">

        <title>Starter Template for Bootstrap</title>

        <!-- Bootstrap core CSS -->
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <!-- Custom styles for this template -->
        <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
        <link href="css/style.css" rel="stylesheet">
        <script language="javascript" src="dalliance/dalliance-all.js"></script>
        <script language="javascript" src="FileSaver.js/FileSaver.min.js"></script>
        <script language="javascript" src="js/loadedfiletypes.js"></script>
        <script language="javascript" src="js/variants.js"></script>
        <script language="javascript" src="js/main.js"></script>

        <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
        <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
        <script src="Starter_files/ie-emulation-modes-warning.js"></script>

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
            <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
            <![endif]-->
    </head>

    <body>

        <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand navbar-center" href="#">SNooP</a>
            </div>
            <div class="collapse navbar-collapse navbar-right">
                <ul class="nav navbar-nav">
                    <li><a href="#" id="loadModalHelp">Help</a></li>
                    <li><a href="#">Settings</a></li>
                    <li><a href="#about">About</a></li>
                    <li><a href="#contact">GitHub</a></li>
                </ul>
            </div><!--/.nav-collapse -->
        </div>

        <div class="navbar navbar-default navbar-fixed-top nav-toolbar center" id="controlCenter" role="navigation">
            <div class="navbar-inner">
                <ul class="nav navbar-nav">
                    <li class="spaced"><div class="btn-group">
                            <button type="button" class="btn btn-default btn-sm" id="reload"><span class="glyphicon glyphicon-repeat"></span></button>
                            <!-- <button type="button" class="btn btn-default btn-sm"><span class="glyphicon glyphicon-plus"></span></button> -->
                            <button type="button" class="btn btn-default btn-sm" id="prepareDownloadQCreport"><span class="glyphicon glyphicon-download-alt"></span></button>
                        </div>
                    </li>
                    <li><a href="#" id="goBack"><span class="glyphicon glyphicon-chevron-left"></span> Previous</a></li>
                    <li class="spaced">
                        <div id="variantSelectListHolder"></div>
                    </li>
                    <!--
                        <li><a href="#" id="qcNotVariant">Not a Variant <span class="glyphicon glyphicon-chevron-right"></span></a></li>
                        <li><a href="#" id="qcPotentialVariant"> Uncertain<span class="glyphicon glyphicon-chevron-right"></span></a></li>
                        <li><a href="#" id="qcCertainVariant">Certain Variant <span class="glyphicon glyphicon-chevron-right"></span></a></li>
                    -->
                    <div class="btn-group">
                        <button type="button" class="btn btn-default btn-sm"><span class="glyphicon glyphicon-chevron-left"></span></button>
                        <button type="button" class="btn btn-default btn-sm"><span class="glyphicon glyphicon-remove"></span></button>
                        <button type="button" class="btn btn-default btn-sm"><span class="fa fa-question fa-lg"></span></button>
                        <button type="button" class="btn btn-default btn-sm"><span class="glyphicon glyphicon-ok"></span></button>
                    </div>
                </ul>
            </div>
        </div>

        <div class="progress progress-bar-fixed" id="progressBar">
            <div class="progress-bar" id="variantProgress" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">
            </div>
        </div>

        <div class="container">
            <div class="row" id="fileLoader">
                <div class="col-md-3"></div>
                <div class="col-md-6">

                    <div class="panel panel-default" id="stepOne">
                        <div class="panel-body">
                            <h4 class="first">Welcome to SNooP</h4>
                            <p class="justify">With this tool you can review potential variant sites in short reads. The first step is to load your BAM and BAI files (x.bam will expect x.bam.bai) along with a text file containing the variant locations of interest. Note that multiple files can be selected at once.</p>
                            <!--<h4 class="notFirst">BAM/BAI files</h4>
                                <p>The BAM files are expected to be indexed and to be named according to the convention that if reads.bam is the BAM file then reads.bam.bai is the index file.</p>
                                <h4 class="notFirst">Variant text files</h4>
                                <p>Text files with the variants of interest expects one variant location per line with the locations having the following formats:<br><br>
                                chr:position<br>
                                chr-position<br>
                                chr position<br>
                                chr,position<br>
                                </ul> 
                                </p>
                            -->
                            <br>
                        </div>
                    </div>
                    <div class="panel panel-default step-two" id="loadedFilesPanel">
                        <div class="panel-heading">Loaded Files</div>
                        <table class="table" id="loadedFilesTable">
                        </table>
                    </div>
                    <div class="btn-group">
                        <div class="file-input btn btn-primary btn-file">
                            <span class="glyphicon glyphicon-upload"></span> <span id="loadFilesText">Load Files</span><input type="file" multiple id="fileLoaded">
                        </div>
                    </div>


                    <div class="btn-group">
                        <div class="btn btn-success" id="loadDalliance">
                            <span class="glyphicon glyphicon-search"></span> Start Qaulity Control Review 
                        </div>
                    </div>

                </div>
                <div class="col-md-3"></div>
            </div>
        </div><!-- /.container -->

        <div id="my-dalliance-holder">
            <div id="svgHolder">Dalliance genome browser goes here.  Unless you have an ancient web browser or something.</div>
        </div>

        <!-- Download QC Report Modal -->
        <div class="modal fade" id="modalDownloadQCreport" tabindex="-1" role="dialog" aria-labelledby="myModalDownloadQCreport" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="myModalDownloadQCreport">Download QC Report</h4>
                    </div>
                    <div class="modal-body">
                        You have reviewed all of the 43 variant locations. 
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" id="downloadQCreport">Download Report</button>
                    </div>
                </div>
            </div>
        </div>


        <!-- Download QC Report Modal -->
        <div class="modal fade" id="modalHelp" tabindex="-1" role="dialog" aria-labelledby="myModalHelp" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="myModalHel">Help</h4>
                    </div>
                    <div class="modal-body">
                        The basic operation of the SNooP tool is:

                        <ul>
                            <li>Load BAM files, BAI files.</li>
                            <li> Load text file with variant locations, one per line. The format of each variant can be any of the following:</li>

                            chr:loc
                            chr-loc
                            chr,loc
                            chr loc

                            As soon as all the files are loaded, click "Start Quality Control Review".
                            This will load the Biodalliance genome viewer.
                            By default the plus strand is is salmon colored and the negative strand is a pastel blue.
                            Any differences will be colored with the standard base colors of

                            <table>
                                <tr><td>A</td><td>Green</td></tr>
                                <tr><td>C</td><td>Blue</td></tr>
                                <tr><td>T</td><td>Red</td></tr>
                                <tr><td>G</td><td>Yellow</td></tr>
                            </table>


                            The first variant from your text file will be in the center under the ruler. Make a decision about this variant and advance to the next by clicking one of 

                            <table>
                                <tr><td>&#x2717;</td><td>Not a Variant</td></tr>
                                <tr><td>?</td><td>Uncertain</td></tr>
                                <tr><td>&#x2713;</td><td>Certain Variant</td></tr>
                            </table>

                            To go back you can either click the Previous button or select from the drop down list any variant site from your text file. The drop down list also displays your previous QC decision with the symbols listed in the table above.
                            As you progress through your variants you will notice the status bar growing to reflect this.
                            When you are finished you will be asked if you would like to download the QC decisions for each file. Note that you can download this at anytime in the process by clicking on the download icon <span class="glyphicon glyphicon-download-alt"></span>.
                            Enter the filename and this will be downloaded onto your machine.
                            This file has the following format

                            <date and time of download>
                            <BAM files loaded>

                            <chr:variant location> : <QC decision>

                            With the following encoding.
                            <table>
                                <tr><td>-1</td><td>Not a Variant</td></tr>
                                <tr><td>0</td><td>Uncertain</td></tr>
                                <tr><td>1</td><td>Certain Variant</td></tr>
                                <tr><td>-99</td><td>No Decision Made</td></tr>  
                            </table>

                            To restart at any time (which will lose all work unless you have downloaded your progress) click the restart button <span class="glyphicon glyphicon-repeat"></span>.
                    </div>
                </div>
            </div>
        </div>




        <!-- Bootstrap core JavaScript -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script> 
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
        <!-- Placed at the end of the document so the pages load faster -->


    </body></html>

